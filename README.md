# ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© 4ì£¼ì°¨ - ì‹œê³„ì—´ ì°¨íŠ¸ êµ¬í˜„

## ğŸ“š ê³¼ì œ

### ì‹œê³„ì—´ ì°¨íŠ¸ êµ¬í˜„

#### ê³¼ì œ1. ì‹œê³„ì—´ ì°¨íŠ¸ êµ¬í˜„

- ë°ì´í„°ì˜ keyê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œê³„ì—´ ì°¨íŠ¸ êµ¬ì„±
- area, barì˜ ê·¸ë˜í”„ê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ë³µí•© ê·¸ë˜í”„ë¡œ êµ¬í˜„
- yì¶•ì— ëŒ€ëµì ì¸ ìˆ˜ì¹˜ êµ¬í˜„

#### ê³¼ì œ2. í˜¸ë²„ ê¸°ëŠ¥ êµ¬í˜„

- íŠ¹ì • êµ¬ì—­ì— í˜¸ë²„ì‹œ `id`, `value_area`, `value_bar` ë°ì´í„°ë¥¼ íˆ´íŒ í˜•íƒœë¡œ ì œê³µ

#### ê³¼ì œ3. í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„

- í•„í„°ë§ì€ íŠ¹ì • ë°ì´í„° êµ¬ì—­ì„ í•˜ì´ë¼ì´íŠ¸ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
- ë²„íŠ¼ í˜•íƒœë¡œ IDê°’(ì§€ì—­ì´ë¦„)ì„ ì´ìš©
- ë²„íŠ¼ì—ì„œ ì„ íƒí•œ IDê°’ê³¼ ë™ì¼í•œ IDê°’ì„ ê°€ì§„ ë°ì´í„° êµ¬ì—­ë§Œ í•˜ì´ë¼ì´íŠ¸ ì²˜ë¦¬
- íŠ¹ì • ë°ì´í„° êµ¬ì—­ì„ í´ë¦­ ì‹œì—ë„ í•„í„°ë§ ê¸°ëŠ¥ê³¼ ë™ì¼í•œ í˜•íƒœë¡œ ë™ì¼í•œ IDê°’ì„ ê°€ì§„ ë°ì´í„° êµ¬ì—­ì„ í•˜ì´ë¼ì´íŠ¸

---

## ì‚¬ìš©í•œ ê¸°ìˆ  ìŠ¤íƒ

<img src="https://shields.io/badge/TypeScript-3178C6?logo=TypeScript&logoColor=FFF&style=flat-square"/> <img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=React&logoColor=white"/> <img src="https://img.shields.io/badge/React Query-FF4154?style=flat-square&logo=React query&logoColor=white"/> <img src="https://img.shields.io/badge/Styled Components-DB7093?style=flat-square&logo=Styled components&logoColor=white"/> <img src="https://img.shields.io/badge/Apexcharts-0D74E8?style=flat-square&logo=Apexcharts&logoColor=white"/> <img src="https://img.shields.io/badge/Axios-5A29E4?style=flat-square&logo=axios&logoColor=white"/>

</br>

---

## ğŸ¬ í˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸° & êµ¬í˜„ì˜ìƒ

êµ¬í˜„ì˜ìƒì€ ë°°í¬ ë§í¬ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
https://pre-onboarding-12th-4th.vercel.app/

---

### ğŸ’­ ì„¤ê³„ ë°©í–¥

1. ì½”ë“œì˜ ê°€ë…ì„± ë° ì¬ì‚¬ìš©ì„±

   - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»¤ìŠ¤í…€ í›…
   - í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì„±í•˜ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ì¶”ìƒí™” ì •ë„ë¥¼ ë¹„ìŠ·í•˜ê²Œ ë§ì¶° ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

2. ì„±ëŠ¥ ìµœì í™”

   - React queryì˜ ìºì‹±ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬

3. Suspense ë° Error boundaryì˜ ì‚¬ìš©

---

## ğŸ› ï¸ êµ¬í˜„ ì„¤ëª…

### 1. ì‹œê³„ì—´ ì°¨íŠ¸ êµ¬í˜„

#### ë°ì´í„° íƒ€ì… ì •ì˜ ë° ì •ì œ

ì°¨íŠ¸ë¥¼ ì‹œê°í™”í•˜ëŠ”ë° ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ Apexchartsì˜ ì‚¬ìš©ë²•ì„ í›‘ì–´ë³¸ ê²°ê³¼, ë°ì´í„°ì˜ ì›ë³¸ ê·¸ëŒ€ë¡œ ì°¨íŠ¸ì— ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›Œë³´ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë°ì´í„° ì°¨íŠ¸ë¥¼ ì‹œê°í™”í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¨¼ì € ì •ì˜í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/types/chart.ts
export interface MainDataType {
  id: string[];
  labels: string[];
  bar: number[];
  area: number[];
}
```

ë°ì´í„° fetchì‹œ ìœ„ì™€ ê°™ì´ ì •ì˜í•œ MainDataTypeì— ë§ê²Œ ë°ì´í„°ë¥¼ ì •ì œí•˜ì—¬ ë°˜í™˜í•˜ëŠ” ìœ í‹¸í•¨ìˆ˜ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/utils/mainData.ts
export const FetchAndDefineMainData: () => Promise<MainDataType> = async () => {
  const data = await getData();
  const labels: string[] = [];
  const bar: number[] = [];
  const area: number[] = [];
  const id: string[] = [];

  for (const [key, value] of Object.entries(data)) {
    id.push(value.id);
    labels.push(key);
    bar.push(value['value_bar']);
    area.push(value['value_area']);
  }
  return { labels, bar, area, id };
};
```

#### UI ë¡œì§ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë¶„ë¦¬

MainChart ì»´í¬ë„ŒíŠ¸ì—ëŠ” UI ê´€ë ¨í•œ ë¡œì§ë§Œ ìˆì„ ìˆ˜ ìˆë„ë¡ Chartì˜ ë‚´ìš©ì´ë‚˜ ì˜µì…˜ì„ êµ¬ì„±í•˜ëŠ” ë³µì¡í•˜ê³  ê¸´ ë¡œì§ì„ useMainChartConfigë¼ëŠ” ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/hooks/useMainChartConfig.tsx
export const useMainChartConfig = ({ data, selectedId }: Props) => {
  const [options, setOptions] = useState<ApexOptions | null>(null);
  const [series, setSeries] = useState<SeriesType[] | null>();
  //...

  // dataì— ë”°ë¼ optionsì„ êµ¬ì„±í•˜ëŠ” ë¡œì§
  useEffect(() => {
    if (!data) return;

    const newOption: ApexOptions = {
      chart: {
        height: 350,
        type: 'line',
        stacked: false,
      },
      // ...more options
    };

    setOptions(newOption);
  }, [data, selectedId, colorBySelectedId]);

  // dataì— ë”°ë¼ seriesë¥¼ êµ¬ì„±í•˜ëŠ” ë¡œì§
  useEffect(() => {
    if (!data) return;

    setSeries([
      {
        name: 'value_bar',
        type: 'column',
        data: data.bar,
      },
      {
        name: 'value_area',
        type: 'area',
        data: data.area,
      },
    ]);
  }, [data]);

  // optionsê³¼ seriesë¥¼ ë°˜í™˜
  return {
    series,
    options,
  };
};
```

ì»¤ìŠ¤í…€ í›…ì„ í†µí•´ ë¡œì§ì„ ë¶„ë¦¬í•œ ê²°ê³¼, MainChartì—ì„œëŠ” UIë¥¼ êµ¬ì„±í•˜ëŠ”ë° í•„ìš”í•œ series, optionsì˜ ê²°ê³¼ê°’ë§Œì„ ë°›ì•„ Chart UIë¥¼ êµ¬ì„±í•˜ëŠ” ë° ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
// src/components/Chart/MainChart.tsx
export const MainChart = () => {
  const { data } = useQuery(['data'], FetchAndDefineMainData);

  const { series, options } = useMainChartConfig({ data, selectedId });

  // ...

  return (
    <ChartWrapper>
      <FilterList selectedId={selectedId} selectId={chooseFilter} />
      {options && series && (
        <ApexCharts ref={chartRef} options={options} series={series} type="line" height={350} />
      )}
    </ChartWrapper>
  );
};
```

#### React Queryì˜ ìºì‹±ê¸°ëŠ¥ì„ í†µí•´ API ìš”ì²­ ìµœì í™”

React Queryì˜ ìºì‹±ê¸°ëŠ¥ì„ í†µí•´ API ìš”ì²­ í›„ 1ì‹œê°„(staleTime) ë™ì•ˆ ìºì‹œëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. StaleTimeì˜ ê²½ìš°, ì£¼ì–´ì§„ mock dataê°€ ëª¨ë‘ 2023ë…„ 2ì›” 1ì¼ì˜ ë°ì´í„°ì„ì„ í™•ì¸í•˜ê³  í˜„ì¬ ì‹œì (2023ë…„ 9ì›” 13ì¼) ê¸°ì¤€ìœ¼ë¡œ ê³¼ê±°ì˜ ë°ì´í„°ì´ê¸° ë•Œë¬¸ì— ìµœì‹  ë°ì´í„°ë¥¼ ë°˜ì˜í•  í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•˜ì—¬ StaleTimeì„ 1ì‹œê°„ìœ¼ë¡œ ê¸¸ê²Œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/main.tsx
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: false,
      suspense: true,
      useErrorBoundary: true,
      staleTime: 1000 * 60 * 60,
      cacheTime: 1000 * 60 * 5,
      refetchOnWindowFocus: false,
      refetchOnReconnect: false,
    },
  },
});
```

ìºì‹œëœ ë°ì´í„°ê°€ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ëˆˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´, ì°¨íŠ¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° ë²„íŠ¼ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 'ì°¨íŠ¸ ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì‹œ ìµœì´ˆ API ìš”ì²­ ì´í›„ 'ì°¨íŠ¸ ìˆ¨ê¸°ê¸°'ë¥¼ í´ë¦­í•˜ê³  ë‹¤ì‹œ 'ì°¨íŠ¸ ë³´ê¸°'ë¥¼ í´ë¦­í–ˆì„ ë•Œ, 'loading...'ì´ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ filterListì—ì„œ fetchí•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì œê³µ ê°€ëŠ¥í•œ filterì˜ ëª©ë¡ì„ ì •ì œí•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì´ ë•Œ, í•„ìš”í•œ ë°ì´í„°ì¸ MainDataì˜ queryKeyë¥¼ ì‚¬ìš©í•˜ì—¬ queryClientì—ì„œ êº¼ë‚´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/components/Filter/FilterList.tsx
export const FilterList = ({ selectedId, selectId }: Props) => {
  const queryclient = useQueryClient();
  const data = queryclient.getQueryData<MainDataType>(['MainData']);

  const [filterIds, setFilterIds] = useState<string[] | null>(null);

  useEffect(() => {
    if (!data) return;

    setFilterIds(Array.from(new Set(data.id)));
  }, [data]);

  return; //...
};
```

#### React Query + Suspense + Error Boundary

Reactì˜ Suspenseì™€ Error Boundaryë¥¼ ì‚¬ìš©í•˜ì—¬ Loading ìƒíƒœì™€ Error ìƒíƒœì— ë”°ë¥¸ ì ì ˆí•œ Fallback UIë¥¼ ì‚¬ìš©ìì—ê²Œ ì œê³µí•˜ê³ , React Queryì˜ QueryErrorResetBoundaryë¥¼ ì‚¬ìš©í•˜ì—¬ Error ë°œìƒ ì‹œ í•´ë‹¹ ìš”ì²­ì„ ì¬ì‹œë„í•˜ê³  ErrorBoundaryë¥¼ ë¦¬ì…‹í•˜ì—¬ Errorì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤.

QueryErrorResetBoundary, ErrorBoundaryì™€ Suspenseë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ëŠ” ë¶€ë¶„ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì»´í¬ë„ŒíŠ¸í™” í–ˆìŠµë‹ˆë‹¤.

```typescript
export const ResetBoundaryWrapper = ({ children }: Props) => {
  return (
    <QueryErrorResetBoundary>
      {({ reset }) => (
        <ErrorBoundary
          onReset={reset}
          fallbackRender={({ error, resetErrorBoundary }) => (
            <ErrorFallback reset={resetErrorBoundary} error={error} />
          )}
        >
          <Suspense fallback={<Loading />}>{children}</Suspense>
        </ErrorBoundary>
      )}
    </QueryErrorResetBoundary>
  );
};
```

```typescript
// src/components/Fallback/ErrorFallback.tsx
export const ErrorFallback = ({ reset, error }: Props) => {
  const resetOnClick = () => reset();

  return (
    <div>
      <p>{error?.message}</p>
      <button onClick={resetOnClick}>Try again</button>
    </div>
  );
};

```

ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Loading ë° Errorê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ê°ìŒŒìŠµë‹ˆë‹¤.

```typescript
// src/components/Chart/ChartContainer.tsx
export const ChartContainer = () => {
  const [showChart, setShowChart] = useState < boolean > false;
  const [btnText, setBtnText] = useState < string > '';

  useEffect(() => {
    setBtnText(showChart ? 'ì°¨íŠ¸ ìˆ¨ê¸°ê¸°' : 'ì°¨íŠ¸ ë³´ê¸°');
  }, [showChart]);

  const toggleShowChart = () => setShowChart(prev => !prev);

  return (
    <Container>
      <Btn onClick={toggleShowChart}>{btnText}</Btn>
      {showChart && (
        <ResetBoundaryWrapper>
          <MainChart />
        </ResetBoundaryWrapper>
      )}
    </Container>
  );
};
```

### 2. í˜¸ë²„ ê¸°ëŠ¥ êµ¬í˜„

í˜¸ë²„ ê¸°ëŠ¥ì˜ ê²½ìš° ApexCharts ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì°¨íŠ¸ í˜¸ë²„ì‹œ ToolTipì„ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì˜µì…˜ ë‚´ë¶€ì—ì„œ formatterë¥¼ í†µí•´ ToolTipì˜ ë‚´ìš©ì„ ì›í•˜ëŠ” í˜•íƒœë¡œ êµ¬ì„±í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/hooks/useMainChartConfig.tsx
export const useMainChartConfig = ({ data, selectedId }: Props) => {
  //...

  useEffect(() => {
    if (!data) return;

    const newOption: ApexOptions = {
      // ...more options
      tooltip: {
        shared: true,
        intersect: false,
        x: {
          formatter: function (_, { dataPointIndex }) {
            return data.id[dataPointIndex];
          },
        },
        y: {
          formatter: function (y) {
            if (typeof y !== 'undefined') {
              return y.toFixed(0);
            }
            return y;
          },
        },
      },
    };
    setOptions(newOption);
  }, [data, selectedId, colorBySelectedId]);

  //...

  return {
    series,
    options,
  };
};
```

### 3. í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„

í•„í„° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ selectedIdê°€ ë³€ê²½ë˜ê³ , ì´ ê°’ì„ ì°¨íŠ¸ì˜ ì˜µì…˜ì„ êµ¬ì„±í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì¸ `useMainChartConfig`ê°€ ë°›ì•„ ì°¨íŠ¸ì˜ ì˜µì…˜ì„ ìƒˆë¡œ êµ¬ì„±í•˜ì—¬ ë°˜í™˜í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/components/Chart/MainChart.tsx
export const MainChart = () => {
  //...

  const [selectedId, setSelectedId] = useState<string | null>(null);

  const { series, options } = useMainChartConfig({ data, selectedId });

  //...
};
```

ApexChartsì—ì„œ colors ì˜µì…˜ì— seriesì˜ ìˆ˜ë§Œí¼ ìƒ‰ìƒì„ ì§€ì •í•´ì£¼ë©´ ê° seriesì— colors ì˜µì…˜ì— ê°™ì€ ì¸ë±ìŠ¤ì— ì§€ì •ëœ ìƒ‰ìƒì´ ì ìš©ë©ë‹ˆë‹¤.

```typescript
// seriesì˜ ê°’
[
  {
    name: 'value_bar',
    type: 'column',
    data: data.bar,
  },
  {
    name: 'value_area',
    type: 'area',
    data: data.area,
  },
];
```

```typescript
// color option
colors: [colorBySelectedId, '#00E396'],
```

colorBySelectedId í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ì—¬ selectedIdì— ë”°ë¼ ê° columnì˜ ìƒ‰ì„ ìˆœì„œëŒ€ë¡œ ë‹´ì€ ë°°ì—´ì„ ë°˜í™˜í•˜ì—¬ ì˜µì…˜ì— ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ ë•Œ colorBySelectedId í•¨ìˆ˜ëŠ” useCallbackì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ í•¨ìˆ˜ì˜ ë°˜ë³µì ì¸ ìƒì„±ì„ ë°©ì§€í–ˆìŠµë‹ˆë‹¤.

```typescript
const DEFAULT_COLUMN_COLOR = '#008FFB';
const HIGHLIGHT_COLUMN_COLOR = '#ff6060';

export const useMainChartConfig = ({ data, selectedId }: Props) => {
  //...

  const colorBySelectedId = useCallback(
    ({ dataPointIndex }: { dataPointIndex: number }) => {
      if (selectedId === null) {
        return DEFAULT_COLUMN_COLOR;
      } else {
        if (data?.id[dataPointIndex] === selectedId) return HIGHLIGHT_COLUMN_COLOR;
        return DEFAULT_COLUMN_COLOR;
      }
    },
    [selectedId, data],
  );

  useEffect(() => {
    if (!data) return;

    const newOption: ApexOptions = {
      //...more options

      colors: [colorBySelectedId, '#00E396'],

      //...more options
    };

    setOptions(newOption);
  }, [data, selectedId, colorBySelectedId]);
};
```

---

## ğŸ› ï¸ ì´ìŠˆ ë° ê³ ë¯¼

### 1. í•„í„°ë§ id ë³€ê²½ ì‹œ ì°¨íŠ¸ ì¬ë Œë”ë§ ì•ˆë˜ëŠ” ì´ìŠˆ

selectedIdê°€ ë³€ê²½ë  ë•Œ, optionsê°€ ë³€ê²½ëëŠ”ë°ë¡œ ë¶ˆêµ¬í•˜ê³  Chartê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤. optionsì˜ ë‚´ìš©ì„ ë³€ìˆ˜ì— í• ë‹¹í•˜ì—¬ stateë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ optionsì˜ ì´ì „ ìƒíƒœê°’ê³¼ í˜„ì¬ ìƒíƒœê°’ì˜ Object.is ë¹„êµë¥¼ ë¹„êµí–ˆê³ , ê·¸ ê²°ê³¼ê°€ falseì¸ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë°©ë²•ì„ ì‚¬ìš©í–ˆìŒì—ë„ ì¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ì´ìœ ë¡œ ê°•ì œë¡œ ì¬ë Œë”ë§ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤. ì„ì˜ì˜ stateë¥¼ ë§Œë“¤ì–´ Optionsì´ ë°œìƒí•  ë•Œ Date.now()ì˜ ê°’ì„ í• ë‹¹í•˜ì—¬ ìƒíƒœë¥¼ ë³€ê²½í•˜ì—¬ ì°¨íŠ¸ì˜ ì¬ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ë²•ì„ ì‚¬ìš©í–ˆìŒì—ë„ ì¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ê²°ê³¼ì ìœ¼ë¡œ useRefë¥¼ ì‚¬ìš©í•´ selectedIdê°€ ë³€ê²½ëì„ ë•Œ ì§ì ‘ DOMì„ ì¡°ì‘í•˜ì—¬ ì°¨íŠ¸ì— ë³€ê²½ëœ optionsë¥¼ ë°˜ì˜í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```typescript
export const MainChart = () => {
  //...

  const chartRef = useRef<ChartType | null>(null);

  useEffect(() => {
    if (!data) return;

    if (chartRef.current && chartRef.current.chart) {
      chartRef.current.chart.updateOptions(options, true, true, false);
    }
  }, [selectedId, data, options]);

  //...

  return (
    <ChartWrapper>
      <FilterList selectedId={selectedId} selectId={chooseFilter} />
      {options && series && (
        <ApexCharts ref={chartRef} options={options} series={series} type="line" height={350} />
      )}
    </ChartWrapper>
  );
};
```

ì´ ë•Œ, refì— ë‹´ê¸°ëŠ” ê°’ì´ ApexCharts ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë‚´ì¥ëœ typeì´ ì—†ì–´ì„œ ì´ì— ë§ëŠ” íƒ€ì…ì„ ì •ì˜í•˜ì—¬ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```typescript
// src/types/chart.ts
export interface ChartType extends ReactApexChart {
  chart: {
    updateOptions: (
      newOptions: ApexOptions | null,
      redrawPaths?: boolean,
      animate?: boolean,
      updateSyncedCharts?: boolean,
    ) => void;
  };
}
```
